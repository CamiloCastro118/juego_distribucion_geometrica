<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Juego : Dado</title>
<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<!-- CSS -->
<style>
  :root {
    --bg: #020204;
    --panel: #071212;
    --neon-green: #39ff8b;
    --neon-green-2: #00ff99;
    --neon-pink: #ff66cc;
    --text: #dfeef6;
    --muted: #9fb7c7;
  }

  body {
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Press Start 2P", monospace;
    background: radial-gradient(circle at 20% 10%, #071014 0%, #000 40%), #000;
    color: var(--text);
    padding: 28px 16px;
    text-align: center;
  }

  h1 {
    margin-bottom: 10px;
    color: var(--neon-pink);
    font-family: 'Press Start 2P', monospace;
    font-size: 1.1rem;
    text-shadow: 0 0 10px rgba(255,102,204,0.25);
  }

  /* parrafos en verde neon para resaltar texto explicativo */
  p, header p { color: var(--neon-green); }

  .card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding: 18px;
    border-radius: 12px;
    width: 94%;
    max-width: 700px;
    margin: 0 auto;
  box-shadow: 0 6px 40px rgba(0,0,0,0.7), 0 0 30px rgba(57,255,139,0.08) inset;
  border: 2px solid #39ff8b; /* borde neon verde mas visible */
    color: var(--text);
    text-align: left;
  }

  /* dado grande y centrado dentro de la tarjeta */
  #dado {
    font-size: 6.5rem;
    width: 100%;
    display: block;
    text-align: center;
    margin: 8px 0 6px 0;
    transition: transform 0.6s ease;
  }

  @media (max-width: 600px) {
    #dado { font-size: 3.8rem; }
  }

  input[type="number"] {
    width: 120px;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid rgba(255,255,255,0.04);
    text-align: center;
    background: rgba(0,0,0,0.6);
    color: var(--text);
  }

  button {
    background: linear-gradient(90deg, rgba(57,255,139,0.12), rgba(0,255,153,0.12));
    color: var(--neon-green-2);
    border: 1px solid rgba(57,255,139,0.22);
    padding: 10px 16px;
    margin-top: 8px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    box-shadow: 0 8px 24px rgba(57,255,139,0.08), 0 0 18px rgba(57,255,139,0.06) inset;
    transition: transform 0.12s ease, box-shadow 0.18s ease, background 0.12s ease;
  }

  button:hover { transform: translateY(-3px); box-shadow: 0 12px 30px rgba(57,255,139,0.14), 0 0 28px rgba(57,255,139,0.08); }

  button:focus { outline: 3px solid rgba(57,255,139,0.28); outline-offset: 4px; box-shadow: 0 0 24px rgba(57,255,139,0.12); }

  .log { text-align: left; background: rgba(11,33,53,0.04); padding: 12px; border-radius: 10px; margin-top: 12px; max-height: 250px; overflow-y: auto; font-size: 0.95rem; color: var(--muted); }

  .success { color: #76c776; }
  .fail { color: #ff8a8a; }

  .prob { margin-top: 10px; font-weight: 700; color: var(--neon-green-2); }

  /* footer buttons */
  #btnRegresar, #btnIrSimulacion {
    background-color: transparent;
    border: 2px solid #39ff8b;
    color: #39ff8b;
    padding: 10px 16px;
    border-radius: 8px;
    font-weight: 700;
    margin-left: 8px;
    box-shadow: 0 6px 18px rgba(57,255,139,0.06), 0 0 18px rgba(57,255,139,0.06) inset;
    transition: transform 0.12s ease, box-shadow 0.18s ease;
  }

  #btnRegresar:hover, #btnIrSimulacion:hover { background-color: rgba(57,255,139,0.03); transform: translateY(-3px); box-shadow: 0 10px 26px rgba(57,255,139,0.12), 0 0 26px rgba(57,255,139,0.08); }
  #btnRegresar:focus, #btnIrSimulacion:focus { outline: 3px solid rgba(57,255,139,0.28); outline-offset: 4px; box-shadow: 0 0 28px rgba(57,255,139,0.12); }

  /* tabla de intentos  neon */
  .card table { width: 100%; border-collapse: collapse; margin-top: 14px; background: rgba(0,0,0,0.45); border-radius: 8px; overflow: hidden; border: 1px solid rgba(255,102,204,0.04); }

  .card th { padding: 10px 12px; text-align: left; background: rgba(255,102,204,0.06); color: var(--neon-pink); font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; }

  .card td { padding: 12px; color: var(--muted); font-size: 0.9rem; vertical-align: middle; }

  .card tr:nth-child(even) { background: rgba(57,255,139,0.02); }
  .card tr:nth-child(odd) { background: rgba(255,255,255,0.01); }

  .card td .fail { color: #ff8a8a; }
  .card td .success { color: #76c776; }
</style>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<header>
  <h1>üé≤ El Primer Exito - Lanzamiento de 1 Dado</h1>
  <p>Demostracion interactiva de la <strong>Distribucion Geometrica</strong></p>
  <p>Simula lanzamientos de un dado hasta obtener un <strong>6</strong>. (p = 1/6)</p>
</header>

<div class="card">
  <div id="dado">üé≤</div>
  <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
    <button id="btnLanzar">Lanzar dado</button>
  </div>

  <div id="resultado"></div>

  <table>
    <thead>
      <tr>
      <th>Intento</th>
      <th>Resultado</th>
      <th>Probabilidad teorica P(X=k)</th>
      </tr>
    </thead>
    <tbody id="tabla-body"></tbody>
  </table>

  <canvas id="grafico" width="400" height="250"></canvas>
</div>

<div style="display:flex;flex-direction:column;align-items:center;gap:8px;margin-top:18px;">
  <div style="display:flex;gap:10px;justify-content:center;">
    <button id="btnRegresar" title="Regresar" aria-label="Regresar">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px;color:#39ff8b;">
        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" fill="currentColor"/>
      </svg>
      Regresar
    </button>
    <button id="btnIrSimulacion" title="Abrir simulacion" aria-label="Abrir simulacion">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;margin-right:8px;color:#39ff8b;">
        <path d="M3 12l18-12v24L3 12z" fill="currentColor"/>
      </svg>
      Simulacion
    </button>
  </div>
</div>

<footer>
  Creado por <a href="https://github.com/CamiloCastro118" target="_blank">Camilo Castro</a> ‚Äî ¬© 2025
</footer>

<!-- JS -->
<script>
  /*
   Se registra cada intento en una tabla y se actualiza un grafico de barras 
  */

  // estado y referencias DOM
  let intento = 0;              // contador de intentos k
  let encontrado = false;       // exito
  const p = 1 / 6;              // probabilidad teorica de sacar un 6
  const dado = document.getElementById("dado");
  const resultado = document.getElementById("resultado");
  const tablaBody = document.getElementById("tabla-body");
  const boton = document.getElementById("btnLanzar");
  const btnRegresar = document.getElementById("btnRegresar");

  // datos del grafico etiquetas ensayos y probabilidades calculadas
  const etiquetas = [];
  const probabilidades = [];

  // inicializar Chart.js para mostrar un histograma d
  const ctx = document.getElementById("grafico").getContext("2d");
  const grafico = new Chart(ctx, {
    type: "bar",
    data: {
      labels: etiquetas,
      datasets: [{
        label: "P(X = k)",
        data: probabilidades,
        backgroundColor: "#ff66cc"
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          max: 0.5,
          title: {
            display: true,
            text: "Probabilidad",
            color: "#ff66cc"
          },
          ticks: { color: "#ff66cc" }
        },
        x: {
          title: {
            display: true,
            text: "Intentos",
            color: "#ff66cc"
          },
          ticks: { color: "#ff66cc" }
        }
      }
      ,
      plugins: {
        legend: { labels: { color: "#ff66cc" } },
        tooltip: { titleColor: "#ff66cc", bodyColor: "#ff66cc" }
      }
    }
  });

  // boton de lanzar dado
  boton.addEventListener("click", () => {
    // si ya hubo exito reiniciar para nuevo juego
    if (encontrado) {
      reiniciarJuego();
      return;
    }

    intento++;
    dado.style.transform = "rotate(360deg)"; // animacion

    setTimeout(() => {
      // generar numero entero entre 1 y 6
      const numero = Math.floor(Math.random() * 6) + 1;
      dado.textContent = numero;

      // determinar exito y texto
      const esExito = numero === 6;
      const resultadoTexto = esExito ? "‚úÖ  Exito (sacaste 6)" : "‚ùå Fallo";

      // probabilidad teorica para este intento x
      const probTeorica = ((1 - p) ** (intento - 1) * p).toFixed(4);

      // agregar fila a la tabla con los datos del intento
      tablaBody.innerHTML += `
        <tr>
          <td>${intento}</td>
          <td>${resultadoTexto}</td>
          <td>${probTeorica}</td>
        </tr>
      `;

      // actualizar datos del grafico y redibujar
      etiquetas.push(intento);
      probabilidades.push(probTeorica);
      grafico.update();

      // mostrar resultado en la seccion de texto
      if (esExito) {
        resultado.innerHTML = `
          <strong>!Lograste el primer exito!</strong> üéâ<br>
          Obtuviste un <strong>6</strong> en el intento <strong>${intento}</strong>.<br>
          P(X=${intento}) = ${probTeorica}
        `;
        encontrado = true;
        boton.textContent = "üîÅ Jugar de nuevo";
      } else {
        resultado.textContent = `Intento ${intento}: no salio 6...`;
      }
    }, 400);
  });

  // funcion para reiniciar el juego y el grafico
  function reiniciarJuego() {
    intento = 0;
    encontrado = false;
    tablaBody.innerHTML = "";
    resultado.textContent = "";
    boton.textContent = "Lanzar dado";
    dado.textContent = "üé≤";
    etiquetas.length = 0;
    probabilidades.length = 0;
    grafico.update();
  }

  // manejador del boton regresar: usa history.back si hay historial, sino abre index.html
  btnRegresar.addEventListener("click", () => {
    if (window.history.length > 1) {
      window.history.back();
    } else {
      window.location.href = "index.html";
    }
  });

  // abrir la ventana de simulacion 
  const btnIrSimulacion = document.getElementById("btnIrSimulacion");
  if (btnIrSimulacion) {
    btnIrSimulacion.addEventListener("click", () => {
      window.location.href = "indexxx.html";
    });
  }
</script>
</body>
</html>
